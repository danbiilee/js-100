# 문제55 : 하노이의 탑

[ ❓ ] 하노이의 탑은 프랑스 수학자 에두아르드가 처음으로 발표한 게임입니다. 하노이의 탑은 A, B, C 3개의 기둥과 기둥에 꽂을 수 있는 N 개의 원판으로 이루어져 있습니다. 이 게임에서 다음의 규칙을 만족해야 합니다.

1. 처음에 모든 원판은 A 기둥에 꽂혀 있다.
2. 모든 원판의 지름은 다르다.
3. 이 원반은 세 개의 기둥 중 하나에 반드시 꽂혀야 한다.
4. 작은 원반 위에 큰 원반을 놓을 수 없다.
5. 한 번에 하나의 원판(가장 위에 있는 원판)만을 옮길 수 있다.

이 규칙을 만족하며 A 기둥에 있는 원반 N 개를 모두 C 원반으로 옮기고 싶습니다.
모든 원반을 옮기기 위해 실행되어야 할 최소 원반 이동 횟수를 계산하는 프로그램을 완성해 주세요.

```js
const route = [];

function hanoi(num, start, end, temp){
  //원판이 한 개일 때에는 바로 옮기면 됩니다.
  if (num === 1) {
    route.push([start, end]);
    return NaN;
  }

  //원반이 n-1개를 경유기둥으로 옮기고
  hanoi(/*내용을 채워주세요.*/);
  //가장 큰 원반은 목표기둥으로
  route.push(/*내용을 채워주세요.*/);
  //경유기둥과 시작기둥을 바꿉니다.
  hanoi(/*내용을 채워주세요.*/);
}

hanoi(3, 'A', 'B', 'C');
console.log(route);
console.log(route.length);
```


## 💡 내 코드
전혀 뭔지 몰라서 답안 보고 강의 들었다. 


## ✔️ 답안

- 하노이 순회횟수: `2**n - 1` ➡ `O(2**n)`
- 시작: A, 보조: B, 목표: C
1. 원판이 한 개인 경우 바로 A에서 C로 이동
2. 원판이 두 개인 경우 A의 가장 위 원판을 보조 B로 이동시키고, A의 가장 아래 원판을 목표 C로 이동시킨 뒤 B에 놓아둔 원판을 C로 옮긴다. 
   - `작은 원반 위에 큰 원반을 놓을 수 없다.`라는 4번 규칙 때문
3. 원판이 세 개인 경우
   - A의 가장 작은 첫 번째 원판을 C로 옮긴다.
   - A의 두 번째 원판을 B로 옮긴다.
   - C의 가장 작은 원판을 B로 옮긴다. (B에는 2개의 원판, C는 비워짐)
   - A의 가장 큰 마지막 원판을 C로 옮긴다. (A 비워짐, C에 가장 큰 1개 원판)
   - ⭐ B와 A의 위치를 서로 바꾸고, C가 비워져있다고 생각한다면(C에 가장 큰 원판은 더이상 움직일 일 없음), `원판 두 개인 경우의 알고리즘`과 같아진다. 즉, `재귀`! 

> 문제에 `hanoi(3, 'A', 'B', 'C');` 이렇게 목표기둥과 보조기둥 순서가 바뀌어있어서 더 헷갈렸다. 답안에선 `hanoi(3, 'A', 'C', 'B');` 이렇게 바꿔줌! 세 번째 인자가 목표기둥 C!!! 

```js
const route = []; // 순회 경로(어디에서 어디로 이동했는지)

// num: 원판 수, start: 시작기둥, end: 목표기둥, temp: 보조기둥
function hanoi(num, start, end, temp){
  if (num === 1) {
    route.push([start, end]); // ✅푸시1
    return NaN;
  }

  //원반이 n-1개를 경유기둥으로 옮기고
  hanoi(num-1, start, temp, end); // ✅재귀1

  //가장 큰 원반은 목표기둥으로
  route.push([start, end]); // ✅푸시2

  //경유기둥과 시작기둥을 바꿉니다.
  hanoi(num-1, temp, end, start); // ✅재귀2
}

hanoi(3, 'A', 'C', 'B'); 
console.log(route);
console.log(route.length);
```

위의 함수 실행순서, 코드로 따라가보기😱🤯

```js
function hanoi(3, 'A', 'C', 'B') // 함수1
  function hanoi(2, 'A', 'B', 'C') // 함수2, 함수1의 ✅재귀1
    function hanoi(1, 'A', 'C', 'B') // 함수3, 함수2의 ✅재귀1
      route.push('A', 'C') // 함수3의 ✅푸시1
    route.push('A', 'B') // 함수2의 ✅푸시2
    function hanoi(1, 'C', 'B', 'A') // 함수4, 함수2의 ✅재귀2
      route.push('C', 'B') // 함수4의 ✅푸시1
  route.push('A', 'C') // 함수1의 ✅푸시2

  function hanoi(2, 'B', 'C', 'A') // 함수5, 함수1의 ✅재귀2
    function hanoi(1, 'B', 'A', 'C') // 함수6, 함수5의 ✅재귀2
      route.push('B', 'A') // 함수6의 ✅푸시1
    route.push('B', 'C') // 함수5의 ✅푸시2
    function hanoi(1, 'A', 'C', 'B') // 함수7, 함수5의 ✅재귀2
      route.push('A', 'C') // 함수7의 ✅푸시1
```

    
